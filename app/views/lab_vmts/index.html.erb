<h3>Listing virtual machine templates in labs</h3>
<div id="index_t">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th><%=link_to("Lab", :controller=>"lab_vmts",:action=>"index", :sort_by=>"lab_id")%></th>
        <th><%=link_to("Vmt", :controller=>"lab_vmts",:action=>"index", :sort_by=>"vmt_id")%></th>
        <th></th>   
      </tr>
    </thead>

    <% @lab_vmts.each do |lab_vmt| %>
      <tr class="vmt <%if lab_vmt.lab==@lab then%>current<%end%>">
        <td><%= lab_vmt.name %></td>
        <td><%= lab_vmt.lab.name %></td>
        <td><%= lab_vmt.vmt.image %></td>
        <td><%= link_to 'Edit', edit_lab_vmt_path(lab_vmt),:class=> 'edit-button button' %><%= link_to 'Destroy', lab_vmt, :confirm => 'Are you sure?', :method => :delete ,:class=> 'delete-button button'%></td>
      </tr>
    <% end %>
  </table>
   <%= will_paginate @lab_vmts %><div class="page_info"><%= page_entries_info @lab_vmts %></div>
</div>

<%= form_for(@lab_vmt) do |f| %>
 <% if @lab_vmt.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@lab_vmt.errors.count, "error") %> prohibited this lab_vmt from being saved:</h2>
      <% @lab_vmt.errors.full_messages.each do |msg| %>
        <%= msg %> <br/>
      <% end %>      
    </div>
  <% end %>
  <table>
    <tr>
      <td>  <%= f.text_field :name %></td>
      <td>
        <%@lab_vmt.lab_id=@lab if @lab!=nil%>
        <%=collection_select(:lab_vmt, :lab_id, Lab.all, :id, :name,{:prompt => true})%>
      </td>
      <td>
        <%=collection_select(:lab_vmt, :vmt_id, Vmt.all, :id, :image,{:prompt => true})%>
      </td>
      <td><%= f.submit "Add"%> </td>
    </tr>
  </table>
<%end%>

<%if @lab!=nil%> 
  <% content_for :sidebar_head do %>
    View
  <%end%>
  <% content_for :sidebar do %>
    <li><a href="#" onclick="$('.vmt').hide(); $('.current').show();">this lab's vmts</a></li>
    <li><a href="#" onclick="$('.vmt').show(); ;">all labs vmts</a></li>
  <%end%>
<%end%>
